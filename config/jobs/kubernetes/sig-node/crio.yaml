periodics:
- name: ci-crio-cgroupv1-node-e2e-conformance
  interval: 1h
  cluster: k8s-infra-prow-build
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 240m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
    - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
      command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
      args:
      - --deployment=node
      - --env=KUBE_SSH_USER=core
      - --gcp-zone=us-central1-b
      - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
      - --node-tests=true
      - --provider=gce
      - --test_args=--nodes=8 --focus="\[NodeConformance\]" --skip="\[Flaky\]|\[Slow\]|\[Serial\]"
      - --timeout=180m
      - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv1.yaml
      env:
      - name: GOPATH
        value: /go
      - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
        value: "1"
      resources:
        limits:
          cpu: 4
          memory: 6Gi
        requests:
          cpu: 4
          memory: 6Gi
  annotations:
    testgrid-dashboards: sig-release-master-blocking, sig-node-cri-o,  sig-node-release-blocking
    testgrid-tab-name: ci-crio-cgroupv1-node-e2e-conformance
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com, release-team@kubernetes.io

    description: "OWNER: sig-node; runs NodeConformance e2e tests with crio master and cgroup v1"
- name: ci-crio-cgroupv1-node-e2e-features
  cluster: k8s-infra-prow-build
  interval: 1h
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 240m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
    - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
      command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
      args:
      - --deployment=node
      - --env=KUBE_SSH_USER=core
      - --gcp-zone=us-central1-b
      - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
      - --node-tests=true
      - --provider=gce
      - --test_args=--nodes=8 --focus="\[Feature:.+\]|\[Feature\]" --skip="\[Flaky\]|\[Slow\]|\[Serial\]|\[Feature:InPlacePodVerticalScaling\]|\[Feature:UserNamespacesSupport]|\[Feature:PodLifecycleSleepActionAllowZero]|\[Feature:UserNamespacesPodSecurityStandards]|\[Feature:KubeletCredentialProviders]"
      - --timeout=180m
      - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv1.yaml
      env:
      - name: GOPATH
        value: /go
      - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
        value: "1"
      resources:
        limits:
          cpu: 4
          memory: 6Gi
        requests:
          cpu: 4
          memory: 6Gi
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv1-node-e2e-features
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "OWNER: sig-node; runs Features e2e tests with crio master and cgroup v1"
  - name: ci-crio-cgroupv1-node-e2e-features-canary
  cluster: k8s-infra-prow-build
  interval: 1h
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 180m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv1-node-e2e-features-canary
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "OWNER: sig-node; runs Features e2e tests with crio master and cgroup v1"
    spec:
      containers:
      - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
        command:
        - runner.sh
        args:
        - kubetest2
        - noop
        - --test=node
        - --
        - --repo-root=.
        - --gcp-zone=us-central1-b
        - --parallelism=8
        - --focus-regex=\[Feature:.+\]|\[Feature\]
        - --skip-regex=\[Flaky\]|\[Slow\]|\[Serial\]|\[Feature:InPlacePodVerticalScaling\]|\[Feature:UserNamespacesSupport]|\[Feature:PodLifecycleSleepActionAllowZero]|\[Feature:UserNamespacesPodSecurityStandards]|\[Feature:KubeletCredentialProviders]
        - '--test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
        - --image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv1.yaml
        resources:
          limits:
            cpu: 4
            memory: 6Gi
          requests:
            cpu: 4
            memory: 6Gi
        env:
          - name: GOPATH
            value: /go
          - name: KUBE_SSH_USER
            value: core
          - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
            value: "1"
- name: ci-crio-cgroupv2-node-e2e-features
  cluster: k8s-infra-prow-build
  interval: 1h
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 240m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
    - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
      command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
      args:
      - --deployment=node
      - --env=KUBE_SSH_USER=core
      - --gcp-zone=us-central1-b
      - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--fail-cgroupv1=true --cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
      - --node-tests=true
      - --provider=gce
      - --test_args=--nodes=8 --focus="\[Feature:.+\]|\[Feature\]" --skip="\[Flaky\]|\[Slow\]|\[Serial\]|\[Feature:NodeSwap\]|\[Feature:InPlacePodVerticalScaling\]|\[Feature:UserNamespacesSupport]|\[Feature:UserNamespacesPodSecurityStandards]|\[Feature:KubeletCredentialProviders]"
      - --timeout=180m
      - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv2.yaml
      env:
      - name: GOPATH
        value: /go
      - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
        value: "1"
      resources:
        limits:
          cpu: 4
          memory: 6Gi
        requests:
          cpu: 4
          memory: 6Gi
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv2-node-e2e-features
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "OWNER: sig-node; runs Features e2e tests with crio master and cgroup v2"
  - name: ci-crio-cgroupv2-node-e2e-features-canary
  cluster: k8s-infra-prow-build
  interval: 1h
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 180m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv2-node-e2e-features-canary
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "OWNER: sig-node; runs Features e2e tests with crio master and cgroup v1"
    spec:
      containers:
      - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
        command:
        - runner.sh
        args:
        - kubetest2
        - noop
        - --test=node
        - --
        - --repo-root=.
        - --gcp-zone=us-central1-b
        - --parallelism=8
        - --focus-regex=\[Feature:.+\]|\[Feature\]
        - --skip-regex=\[Flaky\]|\[Slow\]|\[Serial\]|\[Feature:InPlacePodVerticalScaling\]|\[Feature:UserNamespacesSupport]|\[Feature:PodLifecycleSleepActionAllowZero]|\[Feature:UserNamespacesPodSecurityStandards]|\[Feature:KubeletCredentialProviders]
        - '--test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
        - --image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv1.yaml
        resources:
          limits:
            cpu: 4
            memory: 6Gi
          requests:
            cpu: 4
            memory: 6Gi
        env:
          - name: GOPATH
            value: /go
          - name: KUBE_SSH_USER
            value: core
          - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
            value: "1"
- name: ci-crio-cgroupv1-node-e2e-flaky
  cluster: k8s-infra-prow-build
  interval: 2h
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
    - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
      command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
      args:
      - --deployment=node
      - --env=KUBE_SSH_USER=core
      - --gcp-zone=us-central1-b
      - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
      - --node-tests=true
      - --provider=gce
      - --test_args=--nodes=1 --focus="\[Flaky\]"
      - --timeout=60m
      - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv1.yaml
      env:
      - name: GOPATH
        value: /go
      - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
        value: "1"
      resources:
        limits:
          cpu: 4
          memory: 6Gi
        requests:
          cpu: 4
          memory: 6Gi
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv1-node-e2e-flaky
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "OWNER: sig-node; runs Features e2e tests with crio master and cgroup v1"
- name: ci-crio-cgroupv1-node-e2e-unlabelled
  cluster: k8s-infra-prow-build
  interval: 12h
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 400m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
    - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
      command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
      args:
      - --deployment=node
      - --env=KUBE_SSH_USER=core
      - --gcp-zone=us-central1-b
      - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
      - --node-tests=true
      - --provider=gce
      - --test_args=--nodes=1 --skip="\[Flaky\]|\[NodeConformance\]|\[Conformance\]|\[Serial\]|\[Feature:.+\]|\[Feature\]|\[Legacy:.+\]|\[Benchmark\]|\[Feature:SCTPConnectivity\]"
      - --timeout=300m
      - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv1.yaml
      env:
      - name: GOPATH
        value: /go
      - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
        value: "1"
      resources:
        limits:
          cpu: 4
          memory: 6Gi
        requests:
          cpu: 4
          memory: 6Gi
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv1-node-e2e-unlabelled
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "Contains all uncategorized tests, these are tests which are not marked with a [Node] tag. All node tests should be marked with [Feature] or [NodeConformance] classification. Also skipped are [Flaky], [Benchmark], [Legacy]."
- name: ci-crio-cgroupv2-node-e2e-unlabelled
  cluster: k8s-infra-prow-build
  interval: 12h
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 400m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
    - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
      command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
      args:
      - --deployment=node
      - --env=KUBE_SSH_USER=core
      - --gcp-zone=us-central1-b
      - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--fail-cgroupv1=true --cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
      - --node-tests=true
      - --provider=gce
      - --test_args=--nodes=1 --skip="\[Flaky\]|\[NodeConformance\]|\[Conformance\]|\[Serial\]|\[Feature:.+\]|\[Feature\]|\[Legacy:.+\]|\[Benchmark\]|\[Feature:SCTPConnectivity\]"
      - --timeout=300m
      - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv2.yaml
      env:
      - name: GOPATH
        value: /go
      - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
        value: "1"
      resources:
        limits:
          cpu: 4
          memory: 6Gi
        requests:
          cpu: 4
          memory: 6Gi
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv2-node-e2e-unlabelled
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "Contains all uncategorized tests, these are tests which are not marked with a [Node] tag. All node tests should be marked with [Feature] or [NodeConformance] classification. Also skipped are [Flaky], [Benchmark], [Legacy]."
- name: ci-crio-cgroupv1-node-e2e-eviction
  cluster: k8s-infra-prow-build
  interval: 4h30m
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 320m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
    - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
      command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
      args:
      - --deployment=node
      - --env=KUBE_SSH_USER=core
      - --gcp-zone=us-central1-b
      - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
      - --node-tests=true
      - --provider=gce
      - --test_args=--nodes=1 --focus="\[Feature:Eviction\]" --timeout=300m
      - --timeout=300m
      - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv1.yaml
      env:
      - name: GOPATH
        value: /go
      - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
        value: "1"
      resources:
        limits:
          cpu: 4
          memory: 6Gi
        requests:
          cpu: 4
          memory: 6Gi
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv1-node-e2e-eviction
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "OWNER: sig-node; runs Eviction e2e tests with crio master and cgroup v1"
- name: ci-crio-cgroupv2-node-e2e-eviction
  cluster: k8s-infra-prow-build
  interval: 4h30m
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 320m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
    - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
      command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
      args:
      - --deployment=node
      - --env=KUBE_SSH_USER=core
      - --gcp-zone=us-central1-b
      - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--fail-cgroupv1=true --cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
      - --node-tests=true
      - --provider=gce
      - --test_args=--nodes=1 --focus="\[Feature:Eviction\]" --timeout=300m
      - --timeout=300m
      - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv2.yaml
      env:
      - name: GOPATH
        value: /go
      - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
        value: "1"
      resources:
        limits:
          cpu: 4
          memory: 6Gi
        requests:
          cpu: 4
          memory: 6Gi
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv2-node-e2e-eviction
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "OWNER: sig-node; runs Eviction e2e tests with crio master and cgroup v2"
- name: ci-node-kubelet-crio-cgroupv2-performance-test
  cluster: k8s-infra-prow-build
  interval: 12h
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
    - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
      command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
      args:
      - --deployment=node
      - --env=KUBE_SSH_USER=core
      - --gcp-zone=us-central1-b
      - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--fail-cgroupv1=true --cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
      - --node-tests=true
      - --provider=gce
      - --test_args=--nodes=1 --focus="Node Performance Testing"
      - --timeout=60m
      - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv2-performance.yaml
      env:
      - name: GOPATH
        value: /go
      - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
        value: "1"
      resources:
        limits:
          cpu: 4
          memory: 6Gi
        requests:
          cpu: 4
          memory: 6Gi
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: node-kubelet-crio-cgroupv2-performance-test
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "OWNER: sig-node; runs Eviction e2e tests with crio master and cgroup v2"
- name: ci-crio-cgroupv2-node-e2e-conformance
  cluster: k8s-infra-prow-build
  interval: 1h
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 240m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
    - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
      command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
      args:
      - --deployment=node
      - --env=KUBE_SSH_USER=core
      - --gcp-zone=us-central1-b
      - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--fail-cgroupv1=true --cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
      - --node-tests=true
      - --provider=gce
      - --test_args=--nodes=8 --focus="\[NodeConformance\]" --skip="\[Flaky\]|\[Slow\]|\[Serial\]"
      - --timeout=180m
      - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv2.yaml
      env:
      - name: GOPATH
        value: /go
      - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
        value: "1"
      resources:
        limits:
          cpu: 4
          memory: 6Gi
        requests:
          cpu: 4
          memory: 6Gi
  annotations:
    testgrid-dashboards: sig-release-master-blocking, sig-node-cri-o, sig-node-release-blocking
    testgrid-tab-name: ci-crio-cgroupv2-node-e2e-conformance
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com, release-team@kubernetes.io
    description: "OWNER: sig-node; runs NodeConformance e2e tests with crio master and cgroup v2"
- name: ci-crio-cgroupv1-node-e2e-resource-managers
  cluster: k8s-infra-prow-build
  interval: 4h
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 120m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
      - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
        command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
        args:
          - --deployment=node
          - --env=KUBE_SSH_USER=core
          - --gcp-zone=us-central1-b
          - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
          - --node-tests=true
          - --provider=gce
          - --test_args=--nodes=1 --focus="\[Feature:CPUManager\]|\[Feature:MemoryManager\]|\[Feature:TopologyManager\]"
          - --timeout=90m
          - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv1-resource-managers.yaml
        env:
          - name: GOPATH
            value: /go
          - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
            value: "1"
        resources:
          limits:
            cpu: 4
            memory: 6Gi
          requests:
            cpu: 4
            memory: 6Gi
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv1-node-e2e-resource-managers
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "Executes CPU, Memory and Topology manager e2e tests"
- name: ci-crio-cgroupv2-node-e2e-resource-managers
  cluster: k8s-infra-prow-build
  interval: 4h
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 120m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
      - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
        command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
        args:
          - --deployment=node
          - --env=KUBE_SSH_USER=core
          - --gcp-zone=us-central1-b
          - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--fail-cgroupv1=true --cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
          - --node-tests=true
          - --provider=gce
          - --test_args=--nodes=1 --focus="\[Feature:CPUManager\]|\[Feature:MemoryManager\]|\[Feature:TopologyManager\]"
          - --timeout=90m
          - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv2-resource-managers.yaml
        env:
          - name: GOPATH
            value: /go
          - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
            value: "1"
        resources:
          limits:
            cpu: 4
            memory: 6Gi
          requests:
            cpu: 4
            memory: 6Gi
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv2-node-e2e-resource-managers
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "Executes CPU, Memory and Topology manager e2e tests with cgroup v2"
- name: ci-crio-cgroupv1-node-e2e-hugepages
  cluster: k8s-infra-prow-build
  interval: 4h
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 120m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
      - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
        command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
        args:
          - --deployment=node
          - --env=KUBE_SSH_USER=core
          - --gcp-zone=us-central1-b
          - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
          - --node-tests=true
          - --provider=gce
          - --test_args=--nodes=1 --focus="\[Feature:HugePages\]"
          - --timeout=90m
          - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv1-hugepages.yaml
        env:
          - name: GOPATH
            value: /go
          - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
            value: "1"
        resources:
          limits:
            cpu: 4
            memory: 6Gi
          requests:
            cpu: 4
            memory: 6Gi
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv1-node-e2e-hugepages
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "Executes hugepages e2e tests"
- name: ci-crio-cgroupv2-node-e2e-hugepages
  cluster: k8s-infra-prow-build
  interval: 4h
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 120m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
      - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
        command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
        args:
          - --deployment=node
          - --env=KUBE_SSH_USER=core
          - --gcp-zone=us-central1-b
          - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--fail-cgroupv1=true --cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
          - --node-tests=true
          - --provider=gce
          - --test_args=--nodes=1 --focus="\[Feature:HugePages\]"
          - --timeout=90m
          - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv2-hugepages.yaml
        env:
          - name: GOPATH
            value: /go
          - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
            value: "1"
        resources:
          limits:
            cpu: 4
            memory: 6Gi
          requests:
            cpu: 4
            memory: 6Gi
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv2-node-e2e-hugepages
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "Executes hugepages e2e tests"
- name: ci-crio-cgroupv1-evented-pleg
  cluster: k8s-infra-prow-build
  interval: 3h
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
  decorate: true
  decoration_config:
    timeout: 240m
  extra_refs:
  - org: kubernetes
    repo: kubernetes
    base_ref: master
    path_alias: k8s.io/kubernetes
    workdir: true
  - org: kubernetes
    repo: test-infra
    base_ref: master
    path_alias: k8s.io/test-infra
  spec:
    containers:
      - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
        command:
        - runner.sh
        - /workspace/scenarios/kubernetes_e2e.py
        args:
          - --deployment=node
          - --env=KUBE_SSH_USER=core
          - --gcp-zone=us-central1-b
          - '--node-test-args=--container-runtime-endpoint=unix:///var/run/crio/crio.sock
            --container-runtime-process-name=/usr/local/bin/crio
            --container-runtime-pid-file=
            --kubelet-flags="--cgroup-driver=systemd --cgroups-per-qos=true
            --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service
            --kubelet-cgroups=/system.slice/kubelet.service"
            --feature-gates=EventedPLEG=true --extra-log="{\"name\":
            \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
          - --node-tests=true
          - --provider=gce
          - --test_args=--nodes=8 --focus="\[NodeConformance\]"
            --skip="\[Flaky\]|\[Slow\]|\[Serial\]"
          - --timeout=180m
          - --node-args=--image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv1-evented-pleg.yaml
        env:
          - name: GOPATH
            value: /go
          - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
            value: "1"
        resources:
          limits:
            cpu: 4
            memory: 6Gi
          requests:
            cpu: 4
            memory: 6Gi
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv1-evented-pleg
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "OWNER: sig-node; runs NodeConformance e2e tests with crio master,
      cgroup v1 and the evented pleg feature enabled"
- name: ci-crio-cgroupv2-userns-e2e-serial
  cluster: k8s-infra-prow-build
  interval: 24h
  decorate: true
  path_alias: k8s.io/kubernetes
  extra_refs:
    - org: kubernetes
      repo: kubernetes
      base_ref: master
      path_alias: k8s.io/kubernetes
      workdir: true
    - org: kubernetes
      repo: test-infra
      base_ref: master
      path_alias: k8s.io/test-infra
  decoration_config:
    timeout: 240m
  labels:
    preset-service-account: "true"
    preset-k8s-ssh: "true"
    preset-pull-kubernetes-e2e: "true"
    preset-pull-kubernetes-e2e-gce: "true"
  annotations:
    testgrid-dashboards: sig-node-cri-o
    testgrid-tab-name: ci-crio-cgroupv2-userns-e2e-serial
    testgrid-alert-email: kubernetes-sig-node-test-failures@googlegroups.com
    description: "Executes userns E2E tests with ProcMountType and UserNamespacesSupport feature gates"
  spec:
    containers:
      - image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20250613-876fb90a97-master
        command:
          - runner.sh
        args:
          - kubetest2
          - noop
          - --test=node
          - --
          - --repo-root=.
          - --gcp-zone=us-central1-b
          - --parallelism=1
          - --focus-regex=\[Feature:ProcMountType\]|\[Feature:UserNamespacesSupport\]
          - '--test-args=--service-feature-gates="UserNamespacesSupport=true,ProcMountType=true" --feature-gates="UserNamespacesSupport=true,ProcMountType=true" --container-runtime-endpoint=unix:///var/run/crio/crio.sock --container-runtime-process-name=/usr/local/bin/crio --container-runtime-pid-file= --kubelet-flags="--cgroup-driver=systemd --cgroups-per-qos=true --cgroup-root=/ --runtime-cgroups=/system.slice/crio.service --kubelet-cgroups=/system.slice/kubelet.service" --extra-log="{\"name\": \"crio.log\", \"journalctl\": [\"-u\", \"crio\"]}"'
          - --image-config-file=/home/prow/go/src/k8s.io/test-infra/jobs/e2e_node/crio/latest/image-config-cgroupv2-userns.yaml
        resources:
          limits:
            cpu: 4
            memory: 6Gi
          requests:
            cpu: 4
            memory: 6Gi
        env:
          - name: KUBE_SSH_USER
            value: core
          - name: IGNITION_INJECT_GCE_SSH_PUBLIC_KEY_FILE
            value: "1"
