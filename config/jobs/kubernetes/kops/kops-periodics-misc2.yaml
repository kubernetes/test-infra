# Test jobs generated by build_jobs.py (do not manually edit)
# 43 jobs, total of 1113 runs per week
periodics:

# {"cloud": "aws", "distro": "u2404", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-eks-pod-identity
  cluster: k8s-infra-kops-prow-build
  cron: '13 3-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  max_concurrency: 1
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: prowjob-default-sa
    containers:
    - command:
      - runner.sh
      args:
      - ./tests/e2e/scenarios/smoketest/run-test.sh
      env:
      - name: KOPS_BASE_URL
        value: "https://artifacts.k8s.io/binaries/kops/1.33.1/"
      - name: KOPS_VERSION
        value: "v1.33.1"
      - name: K8S_VERSION
        value: "v1.33.5"
      - name: KOPS_SKIP_E2E
        value: "1"
      - name: KOPS_CONTROL_PLANE_SIZE
        value: "3"
      - name: KOPS_DNS_DOMAIN
        value: "tests-kops-aws.k8s.io"
      - name: CLOUD_PROVIDER
        value: "aws"
      - name: CLUSTER_NAME
        value: "e2e-3322ce81e1-eafeb.tests-kops-aws.k8s.io"
      - name: KUBE_SSH_USER
        value: "ubuntu"
      - name: KOPS_IRSA
        value: "true"
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
      securityContext:
        privileged: true
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-k8s-stable, kops-latest, sig-cluster-lifecycle-kops, sig-k8s-infra-canaries
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-eks-pod-identity

# {"cloud": "aws", "distro": "u2404arm64", "extra_flags": "--zones=eu-central-1a --node-size=m6g.large --master-size=m6g.large", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-cni-cilium-k8s-ci
  cron: '5 15-23/24 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='099720109477/ubuntu/images/hvm-ssd-gp3/ubuntu-noble-24.04-arm64-server-20251212' --channel=alpha --networking=cilium --zones=eu-central-1a --node-size=m6g.large --master-size=m6g.large" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ubuntu
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404arm64
    test.kops.k8s.io/extra_flags: --zones=eu-central-1a --node-size=m6g.large --master-size=m6g.large
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-k8s-ci, kops-latest, kops-network-plugins, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-cni-cilium-k8s-ci

# {"cloud": "gce", "distro": "u2404", "extra_flags": "--gce-service-account=default", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-gce-cni-cilium-k8s-ci
  cron: '22 12-23/24 * * *'
  labels:
    preset-k8s-ssh: "true"
  cluster: k8s-infra-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: k8s-kops-test
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=gce \
          --admin-access=0.0.0.0/0 \
          --create-args="--image='ubuntu-os-cloud/ubuntu-2404-noble-amd64-v20260117' --channel=alpha --networking=cilium --gce-service-account=default" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/ssh-key-secret/ssh-private
      - name: KUBE_SSH_USER
        value: prow
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: gce
    test.kops.k8s.io/distro: u2404
    test.kops.k8s.io/extra_flags: --gce-service-account=default
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-gce, kops-k8s-ci, kops-latest, kops-network-plugins, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-gce-cni-cilium-k8s-ci

# {"cloud": "aws", "distro": "u2404arm64", "extra_flags": "--ipv6 --topology=private --dns=public --bastion --zones=us-west-2a", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "calico"}
- name: e2e-kops-aws-cni-calico-ipv6
  cron: '29 0-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='099720109477/ubuntu/images/hvm-ssd-gp3/ubuntu-noble-24.04-arm64-server-20251212' --channel=alpha --networking=calico --ipv6 --topology=private --dns=public --bastion --zones=us-west-2a" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/release/stable.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-marker=stable.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ubuntu
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404arm64
    test.kops.k8s.io/extra_flags: --ipv6 --topology=private --dns=public --bastion --zones=us-west-2a
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: calico
    testgrid-dashboards: kops-distro-u2404, kops-ipv6, kops-k8s-stable, kops-latest, kops-network-plugins, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-cni-calico-ipv6

# {"cloud": "aws", "distro": "u2404arm64", "extra_flags": "--ipv6 --topology=private --dns=public --bastion --zones=us-west-2a", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-cni-cilium-ipv6
  cron: '22 3-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='099720109477/ubuntu/images/hvm-ssd-gp3/ubuntu-noble-24.04-arm64-server-20251212' --channel=alpha --networking=cilium --ipv6 --topology=private --dns=public --bastion --zones=us-west-2a" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/release/stable.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-marker=stable.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ubuntu
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404arm64
    test.kops.k8s.io/extra_flags: --ipv6 --topology=private --dns=public --bastion --zones=us-west-2a
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-ipv6, kops-k8s-stable, kops-latest, kops-network-plugins, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-cni-cilium-ipv6

# {"cloud": "aws", "distro": "u2404arm64", "extra_flags": "--ipv6 --topology=private --dns=public --bastion --zones=us-west-2a", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "kindnet"}
- name: e2e-kops-aws-cni-kindnet-ipv6
  cron: '17 3-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='099720109477/ubuntu/images/hvm-ssd-gp3/ubuntu-noble-24.04-arm64-server-20251212' --channel=alpha --networking=kindnet --ipv6 --topology=private --dns=public --bastion --zones=us-west-2a" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/release/stable.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-marker=stable.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ubuntu
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404arm64
    test.kops.k8s.io/extra_flags: --ipv6 --topology=private --dns=public --bastion --zones=us-west-2a
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: kindnet
    testgrid-dashboards: kops-distro-u2404, kops-ipv6, kops-k8s-stable, kops-latest, kops-network-plugins, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-cni-kindnet-ipv6

# {"cloud": "aws", "distro": "flatcararm64", "extra_flags": "--ipv6 --topology=private --dns=public --bastion", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-ipv6-flatcar
  cron: '41 2-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='075585003325/Flatcar-alpha-4547.0.0-arm64-hvm' --channel=alpha --networking=cilium --ipv6 --topology=private --dns=public --bastion" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/release/stable.txt \
          --validation-wait=20m \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-marker=stable.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: core
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: flatcararm64
    test.kops.k8s.io/extra_flags: --ipv6 --topology=private --dns=public --bastion
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-flatcar, kops-distros, kops-ipv6, kops-k8s-stable, kops-latest, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-ipv6-flatcar

# {"cloud": "aws", "distro": "flatcararm64", "extra_flags": "--ipv6 --topology=private --dns=public --bastion", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "calico"}
- name: e2e-kops-aws-cni-calico-ipv6-flatcar
  cron: '52 3-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='075585003325/Flatcar-alpha-4547.0.0-arm64-hvm' --channel=alpha --networking=calico --ipv6 --topology=private --dns=public --bastion" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/release/stable.txt \
          --validation-wait=20m \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-marker=stable.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: core
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: flatcararm64
    test.kops.k8s.io/extra_flags: --ipv6 --topology=private --dns=public --bastion
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: calico
    testgrid-dashboards: kops-distro-flatcar, kops-distros, kops-ipv6, kops-k8s-stable, kops-latest, kops-network-plugins, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-cni-calico-ipv6-flatcar

# {"cloud": "aws", "distro": "u2404arm64", "extra_flags": "--api-loadbalancer-type=public", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-scenario-no-irsa
  cron: '37 2-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='099720109477/ubuntu/images/hvm-ssd-gp3/ubuntu-noble-24.04-arm64-server-20251212' --channel=alpha --networking=cilium --api-loadbalancer-type=public" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/release/stable.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-marker=stable.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ubuntu
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404arm64
    test.kops.k8s.io/extra_flags: --api-loadbalancer-type=public
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-scenario-no-irsa

# {"cloud": "aws", "distro": "u2404arm64", "extra_flags": "--api-loadbalancer-type=public --set=cluster.spec.cloudProvider.aws.warmPool.minSize=1", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-warm-pool
  cron: '54 6-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='099720109477/ubuntu/images/hvm-ssd-gp3/ubuntu-noble-24.04-arm64-server-20251212' --channel=alpha --networking=cilium --api-loadbalancer-type=public --set=cluster.spec.cloudProvider.aws.warmPool.minSize=1" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/release/stable.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-marker=stable.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ubuntu
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404arm64
    test.kops.k8s.io/extra_flags: --api-loadbalancer-type=public --set=cluster.spec.cloudProvider.aws.warmPool.minSize=1
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-warm-pool

# {"cloud": "aws", "distro": "u2404arm64", "extra_flags": "--zones=us-west-1a --dns=public", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-scenario-terraform
  cron: '5 13-23/24 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='099720109477/ubuntu/images/hvm-ssd-gp3/ubuntu-noble-24.04-arm64-server-20251212' --channel=alpha --networking=cilium --zones=us-west-1a --dns=public" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/release/stable.txt \
          --terraform-version=1.5.5 \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-marker=stable.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ubuntu
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404arm64
    test.kops.k8s.io/extra_flags: --zones=us-west-1a --dns=public
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-scenario-terraform

# {"cloud": "aws", "distro": "u2404arm64", "extra_flags": "--ipv6 --topology=private --bastion --zones=us-west-1a --dns=public", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-scenario-ipv6-terraform
  cron: '17 23-23/24 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='099720109477/ubuntu/images/hvm-ssd-gp3/ubuntu-noble-24.04-arm64-server-20251212' --channel=alpha --networking=cilium --ipv6 --topology=private --bastion --zones=us-west-1a --dns=public" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/release/stable.txt \
          --terraform-version=1.5.5 \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-marker=stable.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ubuntu
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404arm64
    test.kops.k8s.io/extra_flags: --ipv6 --topology=private --bastion --zones=us-west-1a --dns=public
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-ipv6, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-scenario-ipv6-terraform

# {"cloud": "aws", "distro": "u2404arm64", "extra_flags": "--master-count=3 --zones=eu-west-1a,eu-west-1b,eu-west-1c", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "calico"}
- name: e2e-kops-aws-ha-euwest1
  cron: '10 5-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='099720109477/ubuntu/images/hvm-ssd-gp3/ubuntu-noble-24.04-arm64-server-20251212' --channel=alpha --networking=calico --master-count=3 --zones=eu-west-1a,eu-west-1b,eu-west-1c" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/release/stable.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-marker=stable.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ubuntu
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404arm64
    test.kops.k8s.io/extra_flags: --master-count=3 --zones=eu-west-1a,eu-west-1b,eu-west-1c
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: calico
    testgrid-dashboards: kops-distro-u2404, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-ha-euwest1

# {"cloud": "aws", "distro": "u2404", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-aws-load-balancer-controller
  cluster: k8s-infra-kops-prow-build
  cron: '37 5-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  max_concurrency: 1
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: prowjob-default-sa
    containers:
    - command:
      - runner.sh
      args:
      - ./tests/e2e/scenarios/aws-lb-controller/run-test.sh
      env:
      - name: KOPS_DNS_DOMAIN
        value: "tests-kops-aws.k8s.io"
      - name: CLOUD_PROVIDER
        value: "aws"
      - name: CLUSTER_NAME
        value: "e2e-4342699135-9b4dd.tests-kops-aws.k8s.io"
      - name: KUBE_SSH_USER
        value: "ubuntu"
      - name: KOPS_IRSA
        value: "true"
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
      securityContext:
        privileged: true
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-aws-load-balancer-controller

# {"cloud": "aws", "distro": "u2404", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-keypair-rotation-ha
  cluster: k8s-infra-kops-prow-build
  cron: '26 12-23/24 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  max_concurrency: 1
  decorate: true
  decoration_config:
    timeout: 270m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: prowjob-default-sa
    containers:
    - command:
      - runner.sh
      args:
      - ./tests/e2e/scenarios/keypair-rotation/run-test.sh
      env:
      - name: KOPS_CONTROL_PLANE_SIZE
        value: "3"
      - name: KOPS_DNS_DOMAIN
        value: "tests-kops-aws.k8s.io"
      - name: CLOUD_PROVIDER
        value: "aws"
      - name: CLUSTER_NAME
        value: "e2e-349a115d39-16181.tests-kops-aws.k8s.io"
      - name: KUBE_SSH_USER
        value: "ubuntu"
      - name: KOPS_IRSA
        value: "true"
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
      securityContext:
        privileged: true
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-keypair-rotation-ha

# {"cloud": "aws", "distro": "u2404", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-metrics-server
  cluster: k8s-infra-kops-prow-build
  cron: '42 2-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  max_concurrency: 1
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: prowjob-default-sa
    containers:
    - command:
      - runner.sh
      args:
      - ./tests/e2e/scenarios/metrics-server/run-test.sh
      env:
      - name: KOPS_DNS_DOMAIN
        value: "tests-kops-aws.k8s.io"
      - name: CLOUD_PROVIDER
        value: "aws"
      - name: CLUSTER_NAME
        value: "e2e-127cbce38e-b114d.tests-kops-aws.k8s.io"
      - name: KUBE_SSH_USER
        value: "ubuntu"
      - name: KOPS_IRSA
        value: "true"
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
      securityContext:
        privileged: true
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-metrics-server

# {"cloud": "aws", "distro": "u2404", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-pod-identity-webhook
  cluster: k8s-infra-kops-prow-build
  cron: '50 6-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  max_concurrency: 1
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: prowjob-default-sa
    containers:
    - command:
      - runner.sh
      args:
      - ./tests/e2e/scenarios/podidentitywebhook/run-test.sh
      env:
      - name: KOPS_DNS_DOMAIN
        value: "tests-kops-aws.k8s.io"
      - name: CLOUD_PROVIDER
        value: "aws"
      - name: CLUSTER_NAME
        value: "e2e-49d63c55eb-ac683.tests-kops-aws.k8s.io"
      - name: KUBE_SSH_USER
        value: "ubuntu"
      - name: KOPS_IRSA
        value: "true"
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
      securityContext:
        privileged: true
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-pod-identity-webhook

# {"cloud": "aws", "distro": "u2404", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-addon-resource-tracking
  cluster: k8s-infra-kops-prow-build
  cron: '43 4-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  max_concurrency: 1
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: prowjob-default-sa
    containers:
    - command:
      - runner.sh
      args:
      - ./tests/e2e/scenarios/addon-resource-tracking/run-test.sh
      env:
      - name: KOPS_DNS_DOMAIN
        value: "tests-kops-aws.k8s.io"
      - name: CLOUD_PROVIDER
        value: "aws"
      - name: CLUSTER_NAME
        value: "e2e-c0d41e2af2-13250.tests-kops-aws.k8s.io"
      - name: KUBE_SSH_USER
        value: "ubuntu"
      - name: KOPS_IRSA
        value: "true"
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
      securityContext:
        privileged: true
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-addon-resource-tracking

# {"cloud": "aws", "distro": "u2404arm64", "extra_flags": "--set=cluster.spec.externalDNS.provider=external-dns --dns=public", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-external-dns
  cron: '25 6-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='099720109477/ubuntu/images/hvm-ssd-gp3/ubuntu-noble-24.04-arm64-server-20251212' --channel=alpha --networking=cilium --set=cluster.spec.externalDNS.provider=external-dns --dns=public" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/release/stable.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-marker=stable.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ubuntu
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404arm64
    test.kops.k8s.io/extra_flags: --set=cluster.spec.externalDNS.provider=external-dns --dns=public
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-external-dns

# {"cloud": "aws", "distro": "u2404arm64", "extra_flags": "--ipv6 --bastion --set=cluster.spec.externalDNS.provider=external-dns --dns=public", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-ipv6-external-dns
  cron: '55 5-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='099720109477/ubuntu/images/hvm-ssd-gp3/ubuntu-noble-24.04-arm64-server-20251212' --channel=alpha --networking=cilium --ipv6 --bastion --set=cluster.spec.externalDNS.provider=external-dns --dns=public" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/release/stable.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-marker=stable.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ubuntu
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404arm64
    test.kops.k8s.io/extra_flags: --ipv6 --bastion --set=cluster.spec.externalDNS.provider=external-dns --dns=public
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-ipv6, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-ipv6-external-dns

# {"cloud": "aws", "distro": "u2404arm64", "feature_flags": "APIServerNodes", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-apiserver-nodes
  cron: '19 6-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='099720109477/ubuntu/images/hvm-ssd-gp3/ubuntu-noble-24.04-arm64-server-20251212' --channel=alpha --networking=cilium" \
          --env=KOPS_FEATURE_FLAGS=APIServerNodes \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/release/stable.txt \
          --template-path=/home/prow/go/src/k8s.io/kops/tests/e2e/templates/apiserver.yaml.tmpl \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-marker=stable.txt \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ubuntu
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404arm64
    test.kops.k8s.io/feature_flags: APIServerNodes
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-apiserver-nodes

# {"cloud": "aws", "distro": "u2404arm64", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-karpenter
  cluster: k8s-infra-kops-prow-build
  cron: '14 16-23/24 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  max_concurrency: 1
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: prowjob-default-sa
    containers:
    - command:
      - runner.sh
      args:
      - ./tests/e2e/scenarios/karpenter/run-test.sh
      env:
      - name: KOPS_DNS_DOMAIN
        value: "tests-kops-aws.k8s.io"
      - name: CLOUD_PROVIDER
        value: "aws"
      - name: CLUSTER_NAME
        value: "e2e-8b031a24de-4b12b.tests-kops-aws.k8s.io"
      - name: KUBE_SSH_USER
        value: "ubuntu"
      - name: KOPS_IRSA
        value: "true"
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
      securityContext:
        privileged: true
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404arm64
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-karpenter

# {"cloud": "aws", "distro": "u2404arm64", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-ipv6-karpenter
  cluster: k8s-infra-kops-prow-build
  cron: '55 7-23/24 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  max_concurrency: 1
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: prowjob-default-sa
    containers:
    - command:
      - runner.sh
      args:
      - ./tests/e2e/scenarios/karpenter/run-test.sh
      env:
      - name: OVERRIDES
        value: "--ipv6 --topology=private --bastion"
      - name: KOPS_DNS_DOMAIN
        value: "tests-kops-aws.k8s.io"
      - name: CLOUD_PROVIDER
        value: "aws"
      - name: CLUSTER_NAME
        value: "e2e-6e00e57ddb-8c03f.tests-kops-aws.k8s.io"
      - name: KUBE_SSH_USER
        value: "ubuntu"
      - name: KOPS_IRSA
        value: "true"
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
      securityContext:
        privileged: true
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2404arm64
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-u2404, kops-ipv6, kops-k8s-stable, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-ipv6-karpenter

# {"cloud": "aws", "distro": "al2023", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-hostname-bug121018
  cron: '4 2-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='137112412989/al2023-ami-2023.9.20251208.0-kernel-6.12-x86_64' --channel=alpha --networking=cilium" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --skip-regex="\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\]|nfs|NFS|Gluster|NodeProblemDetector|fallback.to.local.terminating.endpoints.when.there.are.no.ready.endpoints.with.externalTrafficPolicy.Local|Services.*rejected.*endpoints|TCP.CLOSE_WAIT|external.IP.is.not.assigned.to.a.node|same.port.number.but.different.protocols|same.hostPort.but.different.hostIP.and.protocol|serve.endpoints.on.same.port.and.different.protocols|should.check.kube-proxy.urls|should.verify.that.all.nodes.have.volume.limits" \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ec2-user
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: al2023
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: kops-distro-al2023, kops-k8s-ci, kops-latest, kops-misc, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: kops-aws-hostname-bug121018

# {"cloud": "aws", "distro": "rhel9", "extra_flags": "--set=cluster.spec.containerd.selinuxEnabled=true --set=cluster.spec.kubeControllerManager.controllers=* --set=cluster.spec.kubeControllerManager.controllers=selinux-warning-controller", "feature_flags": "SELinuxMount", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-selinux
  cron: '38 1-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 150m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='309956199498/RHEL-9.6.0_HVM-20251209-x86_64-0-Hourly2-GP3' --channel=alpha --networking=cilium --set=cluster.spec.containerd.selinuxEnabled=true --set=cluster.spec.kubeControllerManager.controllers=* --set=cluster.spec.kubeControllerManager.controllers=selinux-warning-controller" \
          --env=KOPS_FEATURE_FLAGS=SELinuxMount \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=120m --master-os-distro=custom --node-os-distro=custom" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Feature:SELinux\]" \
          --skip-regex="\[Feature:Volumes\]|\[Driver:.nfs\]|\[Driver:.nfs3\]|\[Driver:.local\]|\[FeatureGate:SELinuxMount\]" \
          --parallel=1
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ec2-user
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: rhel9
    test.kops.k8s.io/extra_flags: --set=cluster.spec.containerd.selinuxEnabled=true --set=cluster.spec.kubeControllerManager.controllers=* --set=cluster.spec.kubeControllerManager.controllers=selinux-warning-controller
    test.kops.k8s.io/feature_flags: SELinuxMount
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-alert-email: kubernetes-sig-storage-test-failures@googlegroups.com
    testgrid-dashboards: kops-distro-rhel9, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-num-failures-to-alert: '10'
    testgrid-tab-name: kops-aws-selinux

# {"cloud": "aws", "distro": "rhel9", "extra_flags": "--set=cluster.spec.containerd.selinuxEnabled=true --set=cluster.spec.kubeControllerManager.controllers=* --set=cluster.spec.kubeControllerManager.controllers=selinux-warning-controller", "feature_flags": "SELinuxMount", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-kops-aws-selinux-alpha
  cron: '8 0-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 150m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='309956199498/RHEL-9.6.0_HVM-20251209-x86_64-0-Hourly2-GP3' --channel=alpha --networking=cilium --set=cluster.spec.containerd.selinuxEnabled=true --set=cluster.spec.kubeControllerManager.controllers=* --set=cluster.spec.kubeControllerManager.controllers=selinux-warning-controller" \
          --env=KOPS_FEATURE_FLAGS=SELinuxMount \
          --kubernetes-feature-gates=SELinuxMount,SELinuxChangePolicy \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=120m --master-os-distro=custom --node-os-distro=custom" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Feature:SELinux\]" \
          --skip-regex="\[Feature:Volumes\]|\[Driver:.nfs\]|\[Driver:.nfs3\]|\[Driver:.local\]|\[Feature:SELinuxMountReadWriteOncePodOnly\]" \
          --parallel=1
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ec2-user
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: rhel9
    test.kops.k8s.io/extra_flags: --set=cluster.spec.containerd.selinuxEnabled=true --set=cluster.spec.kubeControllerManager.controllers=* --set=cluster.spec.kubeControllerManager.controllers=selinux-warning-controller
    test.kops.k8s.io/feature_flags: SELinuxMount
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-alert-email: kubernetes-sig-storage-test-failures@googlegroups.com
    testgrid-dashboards: kops-distro-rhel9, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops
    testgrid-days-of-results: '90'
    testgrid-num-failures-to-alert: '10'
    testgrid-tab-name: kops-aws-selinux-alpha

# {"cloud": "gce", "distro": "cos125", "extra_flags": "--set=spec.nodeProblemDetector.enabled=true --gce-service-account=default", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "kindnet"}
- name: e2e-ci-kubernetes-kops-cos-gce-canary
  cron: '50 2-23/3 * * *'
  labels:
    preset-k8s-ssh: "true"
  cluster: k8s-infra-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: k8s-kops-test
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=gce \
          --admin-access=0.0.0.0/0 \
          --create-args="--image='cos-cloud/cos-125-19216-104-95' --channel=alpha --networking=kindnet --set=spec.nodeProblemDetector.enabled=true --gce-service-account=default" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --skip-regex="\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\]|\[KubeUp\]" \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/ssh-key-secret/ssh-private
      - name: KUBE_SSH_USER
        value: prow
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: gce
    test.kops.k8s.io/distro: cos125
    test.kops.k8s.io/extra_flags: --set=spec.nodeProblemDetector.enabled=true --gce-service-account=default
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: kindnet
    testgrid-dashboards: kops-distro-cos125, kops-gce, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '35'
    testgrid-tab-name: ci-kubernetes-kops-cos-gce-canary

# {"cloud": "aws", "distro": "al2023", "extra_flags": "--set=spec.nodeProblemDetector.enabled=true --set=spec.packages=nfs-utils", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "kubenet"}
- name: e2e-ci-kubernetes-kops-al2023-aws-canary
  cron: '50 0-23/3 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='137112412989/al2023-ami-2023.9.20251208.0-kernel-6.12-x86_64' --channel=alpha --networking=kubenet --set=spec.nodeProblemDetector.enabled=true --set=spec.packages=nfs-utils" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --skip-regex="\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\]" \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ec2-user
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: al2023
    test.kops.k8s.io/extra_flags: --set=spec.nodeProblemDetector.enabled=true --set=spec.packages=nfs-utils
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: kubenet
    testgrid-dashboards: amazon-ec2-kops, kops-distro-al2023, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '35'
    testgrid-tab-name: ci-kubernetes-kops-al2023-aws-canary

# {"cloud": "aws", "distro": "u2204", "extra_flags": "--set=spec.nodeProblemDetector.enabled=true --set=spec.packages=nfs-common", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "kubenet"}
- name: e2e-ci-kubernetes-kops-ubuntu-aws-canary
  cron: '31 1-23/3 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 90m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='099720109477/ubuntu/images/hvm-ssd/ubuntu-jammy-22.04-amd64-server-20251212' --channel=alpha --networking=kubenet --set=spec.nodeProblemDetector.enabled=true --set=spec.packages=nfs-common" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=60m --master-os-distro=ubuntu --node-os-distro=ubuntu" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --skip-regex="\[Slow\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\]" \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ubuntu
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: u2204
    test.kops.k8s.io/extra_flags: --set=spec.nodeProblemDetector.enabled=true --set=spec.packages=nfs-common
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: kubenet
    testgrid-dashboards: kops-distro-u2204, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '35'
    testgrid-tab-name: ci-kubernetes-kops-ubuntu-aws-canary

# {"cloud": "gce", "distro": "cos125", "extra_flags": "--set=spec.networking.networkID=default --gce-service-account=default", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "kindnet"}
- name: e2e-ci-kubernetes-kops-cos-gce-slow-canary
  cron: '37 2-23/4 * * *'
  labels:
    preset-k8s-ssh: "true"
  cluster: k8s-infra-prow-build
  decorate: true
  decoration_config:
    timeout: 180m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: k8s-kops-test
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=gce \
          --admin-access=0.0.0.0/0 \
          --create-args="--image='cos-cloud/cos-125-19216-104-95' --channel=alpha --networking=kindnet --set=spec.networking.networkID=default --gce-service-account=default" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=150m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Slow\]" \
          --skip-regex="\[Driver:.gcepd\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\]|\[KubeUp\]" \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/ssh-key-secret/ssh-private
      - name: KUBE_SSH_USER
        value: prow
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: gce
    test.kops.k8s.io/distro: cos125
    test.kops.k8s.io/extra_flags: --set=spec.networking.networkID=default --gce-service-account=default
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: kindnet
    testgrid-dashboards: kops-distro-cos125, kops-gce, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '47'
    testgrid-tab-name: ci-kubernetes-kops-cos-gce-slow-canary

# {"cloud": "aws", "distro": "al2023", "extra_flags": "--set=spec.packages=nfs-utils", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "kubenet"}
- name: e2e-ci-kubernetes-kops-al2023-aws-slow-canary
  cron: '1 1-23/4 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 180m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='137112412989/al2023-ami-2023.9.20251208.0-kernel-6.12-x86_64' --channel=alpha --networking=kubenet --set=spec.packages=nfs-utils" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=150m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Slow\]" \
          --skip-regex="\[Driver:.gcepd\]|\[Serial\]|\[Disruptive\]|\[Flaky\]|\[Feature:.+\]" \
          --parallel=25
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ec2-user
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: al2023
    test.kops.k8s.io/extra_flags: --set=spec.packages=nfs-utils
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: kubenet
    testgrid-dashboards: amazon-ec2-kops, kops-distro-al2023, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '47'
    testgrid-tab-name: ci-kubernetes-kops-al2023-aws-slow-canary

# {"cloud": "gce", "distro": "cos125", "extra_flags": "--set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log --gce-service-account=default", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "kindnet"}
- name: e2e-ci-kubernetes-kops-cos-gce-conformance-canary
  cron: '44 1-23/4 * * *'
  labels:
    preset-k8s-ssh: "true"
  cluster: k8s-infra-prow-build
  decorate: true
  decoration_config:
    timeout: 230m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: k8s-kops-test
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=gce \
          --admin-access=0.0.0.0/0 \
          --create-args="--image='cos-cloud/cos-125-19216-104-95' --channel=alpha --networking=kindnet --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log --gce-service-account=default" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=200m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Conformance\]|\[NodeConformance\]" \
          --skip-regex="\[FOOBAR\]" \
          --parallel=1
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/ssh-key-secret/ssh-private
      - name: KUBE_SSH_USER
        value: prow
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: gce
    test.kops.k8s.io/distro: cos125
    test.kops.k8s.io/extra_flags: --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log --gce-service-account=default
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: kindnet
    testgrid-dashboards: kops-distro-cos125, kops-gce, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '47'
    testgrid-tab-name: ci-kubernetes-kops-cos-gce-conformance-canary

# {"cloud": "aws", "distro": "al2023", "extra_flags": "--set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "kubenet"}
- name: e2e-ci-kubernetes-kops-al2023-aws-conformance-canary
  cron: '10 1-23/4 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 230m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='137112412989/al2023-ami-2023.9.20251208.0-kernel-6.12-x86_64' --channel=alpha --networking=kubenet --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=200m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Conformance\]" \
          --skip-regex="\[FOOBAR\]" \
          --parallel=1
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ec2-user
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: al2023
    test.kops.k8s.io/extra_flags: --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: kubenet
    testgrid-dashboards: amazon-ec2-kops, kops-distro-al2023, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '47'
    testgrid-tab-name: ci-kubernetes-kops-al2023-aws-conformance-canary

# {"cloud": "aws", "distro": "al2023", "extra_flags": "--node-size=r5d.xlarge --master-size=r5d.xlarge --set=cluster.spec.networking.amazonVPC.env=ENABLE_PREFIX_DELEGATION=true --set=cluster.spec.networking.amazonVPC.env=MINIMUM_IP_TARGET=80 --set=cluster.spec.networking.amazonVPC.env=WARM_IP_TARGET=10 --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log", "k8s_version": "stable", "kops_channel": "alpha", "kops_version": "latest", "networking": "amazonvpc"}
- name: e2e-ci-kubernetes-kops-al2023-aws-conformance-aws-cni
  cron: '16 1-23/4 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 230m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='137112412989/al2023-ami-2023.9.20251208.0-kernel-6.12-x86_64' --channel=alpha --networking=amazonvpc --node-size=r5d.xlarge --master-size=r5d.xlarge --set=cluster.spec.networking.amazonVPC.env=ENABLE_PREFIX_DELEGATION=true --set=cluster.spec.networking.amazonVPC.env=MINIMUM_IP_TARGET=80 --set=cluster.spec.networking.amazonVPC.env=WARM_IP_TARGET=10 --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log" \
          --cluster-name="kubernetes-e2e-al2023-aws-conformance-aws-cni.k8s.local" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/release/stable.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=200m" \
          --test-package-marker=stable.txt \
          --focus-regex="\[Conformance\]" \
          --skip-regex="\[FOOBAR\]" \
          --parallel=1
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ec2-user
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: al2023
    test.kops.k8s.io/extra_flags: --node-size=r5d.xlarge --master-size=r5d.xlarge --set=cluster.spec.networking.amazonVPC.env=ENABLE_PREFIX_DELEGATION=true --set=cluster.spec.networking.amazonVPC.env=MINIMUM_IP_TARGET=80 --set=cluster.spec.networking.amazonVPC.env=WARM_IP_TARGET=10 --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log
    test.kops.k8s.io/k8s_version: stable
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: amazonvpc
    testgrid-dashboards: amazon-ec2-kops, kops-distro-al2023, kops-k8s-stable, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '47'
    testgrid-tab-name: ci-kubernetes-kops-al2023-aws-conformance-aws-cni

# {"cloud": "aws", "distro": "al2023", "extra_flags": "--node-size=r5d.xlarge --master-size=r5d.xlarge --set=cluster.spec.networking.amazonVPC.env=ENABLE_PREFIX_DELEGATION=true --set=cluster.spec.networking.amazonVPC.env=MINIMUM_IP_TARGET=80 --set=cluster.spec.networking.amazonVPC.env=WARM_IP_TARGET=10 --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "amazonvpc"}
- name: e2e-ci-kubernetes-kops-al2023-aws-conformance-aws-cni-canary
  cron: '30 2-23/4 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 230m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='137112412989/al2023-ami-2023.9.20251208.0-kernel-6.12-x86_64' --channel=alpha --networking=amazonvpc --node-size=r5d.xlarge --master-size=r5d.xlarge --set=cluster.spec.networking.amazonVPC.env=ENABLE_PREFIX_DELEGATION=true --set=cluster.spec.networking.amazonVPC.env=MINIMUM_IP_TARGET=80 --set=cluster.spec.networking.amazonVPC.env=WARM_IP_TARGET=10 --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log" \
          --cluster-name="kubernetes-e2e-al2023-aws-conformance-aws-cni-canary.k8s.local" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=200m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Conformance\]" \
          --skip-regex="\[FOOBAR\]" \
          --parallel=1
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ec2-user
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: al2023
    test.kops.k8s.io/extra_flags: --node-size=r5d.xlarge --master-size=r5d.xlarge --set=cluster.spec.networking.amazonVPC.env=ENABLE_PREFIX_DELEGATION=true --set=cluster.spec.networking.amazonVPC.env=MINIMUM_IP_TARGET=80 --set=cluster.spec.networking.amazonVPC.env=WARM_IP_TARGET=10 --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: amazonvpc
    testgrid-dashboards: amazon-ec2-kops, kops-distro-al2023, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '47'
    testgrid-tab-name: ci-kubernetes-kops-al2023-aws-conformance-aws-cni-canary

# {"cloud": "aws", "distro": "al2023", "extra_flags": "--set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeProxy.enabled=false --set=spec.networking.cilium.enableNodePort=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "cilium"}
- name: e2e-ci-kubernetes-kops-al2023-aws-conformance-cilium-canary
  cron: '57 1-23/4 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 230m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='137112412989/al2023-ami-2023.9.20251208.0-kernel-6.12-x86_64' --channel=alpha --networking=cilium --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeProxy.enabled=false --set=spec.networking.cilium.enableNodePort=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log" \
          --cluster-name="kubernetes-e2e-al2023-aws-conformance-cilium.k8s.local" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=200m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Conformance\]" \
          --skip-regex="should.serve.endpoints.on.same.port.and.different.protocols|same.hostPort.but.different.hostIP.and.protocol" \
          --parallel=1
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ec2-user
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: al2023
    test.kops.k8s.io/extra_flags: --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeProxy.enabled=false --set=spec.networking.cilium.enableNodePort=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: cilium
    testgrid-dashboards: amazon-ec2-kops, kops-distro-al2023, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '47'
    testgrid-tab-name: ci-kubernetes-kops-al2023-aws-conformance-cilium-canary

# {"cloud": "gce", "distro": "cos125", "extra_flags": "--node-count=3 --gce-service-account=default", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "kindnet"}
- name: e2e-ci-kubernetes-kops-cos-gce-disruptive-canary
  cron: '57 0-23/8 * * *'
  labels:
    preset-k8s-ssh: "true"
  cluster: k8s-infra-prow-build
  decorate: true
  decoration_config:
    timeout: 630m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: k8s-kops-test
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=gce \
          --admin-access=0.0.0.0/0 \
          --create-args="--image='cos-cloud/cos-125-19216-104-95' --channel=alpha --networking=kindnet --node-count=3 --gce-service-account=default" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=600m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Disruptive\]" \
          --skip-regex="\[Driver:.gcepd\]|\[Flaky\]|\[Feature:.+\]|\[KubeUp\]|\[sig-cloud-provider-gcp\]" \
          --parallel=1
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/ssh-key-secret/ssh-private
      - name: KUBE_SSH_USER
        value: prow
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: gce
    test.kops.k8s.io/distro: cos125
    test.kops.k8s.io/extra_flags: --node-count=3 --gce-service-account=default
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: kindnet
    testgrid-dashboards: kops-distro-cos125, kops-gce, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: ci-kubernetes-kops-cos-gce-disruptive-canary

# {"cloud": "gce", "distro": "cos125", "extra_flags": "--node-count=3 --gce-service-account=default", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "gce"}
- name: e2e-ci-kubernetes-kops-cos-gce-reboot-canary
  cron: '23 3-23/8 * * *'
  labels:
    preset-k8s-ssh: "true"
  cluster: k8s-infra-prow-build
  decorate: true
  decoration_config:
    timeout: 330m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: k8s-kops-test
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=gce \
          --admin-access=0.0.0.0/0 \
          --create-args="--image='cos-cloud/cos-125-19216-104-95' --channel=alpha --networking=gce --node-count=3 --gce-service-account=default" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=300m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Feature:Reboot\]" \
          --skip-regex="\[FOOBAR\]" \
          --parallel=1
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/ssh-key-secret/ssh-private
      - name: KUBE_SSH_USER
        value: prow
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: gce
    test.kops.k8s.io/distro: cos125
    test.kops.k8s.io/extra_flags: --node-count=3 --gce-service-account=default
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: gce
    testgrid-dashboards: kops-distro-cos125, kops-gce, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: ci-kubernetes-kops-cos-gce-reboot-canary

# {"cloud": "aws", "distro": "al2023", "extra_flags": "--node-size=r5d.xlarge --master-size=r5d.xlarge --set=cluster.spec.networking.amazonVPC.env=ENABLE_PREFIX_DELEGATION=true --set=cluster.spec.networking.amazonVPC.env=MINIMUM_IP_TARGET=80 --set=cluster.spec.networking.amazonVPC.env=WARM_IP_TARGET=10 --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "amazonvpc"}
- name: e2e-ci-kubernetes-kops-al2023-aws-disruptive-canary
  cron: '10 4-23/8 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 530m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='137112412989/al2023-ami-2023.9.20251208.0-kernel-6.12-x86_64' --channel=alpha --networking=amazonvpc --node-size=r5d.xlarge --master-size=r5d.xlarge --set=cluster.spec.networking.amazonVPC.env=ENABLE_PREFIX_DELEGATION=true --set=cluster.spec.networking.amazonVPC.env=MINIMUM_IP_TARGET=80 --set=cluster.spec.networking.amazonVPC.env=WARM_IP_TARGET=10 --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=500m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Disruptive\]" \
          --skip-regex="\[Driver:.gcepd\]|\[Flaky\]|\[Feature:.+\]" \
          --parallel=1
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ec2-user
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: al2023
    test.kops.k8s.io/extra_flags: --node-size=r5d.xlarge --master-size=r5d.xlarge --set=cluster.spec.networking.amazonVPC.env=ENABLE_PREFIX_DELEGATION=true --set=cluster.spec.networking.amazonVPC.env=MINIMUM_IP_TARGET=80 --set=cluster.spec.networking.amazonVPC.env=WARM_IP_TARGET=10 --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: amazonvpc
    testgrid-dashboards: amazon-ec2-kops, kops-distro-al2023, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '90'
    testgrid-tab-name: ci-kubernetes-kops-al2023-aws-disruptive-canary

# {"cloud": "gce", "distro": "cos125", "extra_flags": "--set=cluster.spec.cloudConfig.manageStorageClasses=false --node-volume-size=100 --gce-service-account=default", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "kindnet"}
- name: e2e-ci-kubernetes-kops-cos-gce-serial-canary
  cron: '22 0-23/6 * * *'
  labels:
    preset-k8s-ssh: "true"
    preset-storage-e2e-service-account: "true"
  cluster: k8s-infra-prow-build
  decorate: true
  decoration_config:
    timeout: 630m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: k8s-kops-test
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=gce \
          --admin-access=0.0.0.0/0 \
          --create-args="--image='cos-cloud/cos-125-19216-104-95' --channel=alpha --networking=kindnet --set=cluster.spec.cloudConfig.manageStorageClasses=false --node-volume-size=100 --gce-service-account=default" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=600m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Serial\]" \
          --skip-regex="\[Driver:.gcepd\]|\[Flaky\]|\[Feature:.+\]|\[KubeUp\]" \
          --parallel=1
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/ssh-key-secret/ssh-private
      - name: KUBE_SSH_USER
        value: prow
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: gce
    test.kops.k8s.io/distro: cos125
    test.kops.k8s.io/extra_flags: --set=cluster.spec.cloudConfig.manageStorageClasses=false --node-volume-size=100 --gce-service-account=default
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: kindnet
    testgrid-dashboards: kops-distro-cos125, kops-gce, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '71'
    testgrid-tab-name: ci-kubernetes-kops-cos-gce-serial-canary

# {"cloud": "aws", "distro": "al2023", "extra_flags": "--node-volume-size=100 --set=spec.packages=nfs-utils --set=spec.packages=git", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "kubenet"}
- name: e2e-ci-kubernetes-kops-al2023-aws-serial-canary
  cron: '48 0-23/6 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 630m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='137112412989/al2023-ami-2023.9.20251208.0-kernel-6.12-x86_64' --channel=alpha --networking=kubenet --node-volume-size=100 --set=spec.packages=nfs-utils --set=spec.packages=git" \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=600m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Serial\]" \
          --skip-regex="\[Driver:.gcepd\]|\[Flaky\]|\[Feature:.+\]" \
          --parallel=1
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ec2-user
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: al2023
    test.kops.k8s.io/extra_flags: --node-volume-size=100 --set=spec.packages=nfs-utils --set=spec.packages=git
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: kubenet
    testgrid-dashboards: amazon-ec2-kops, kops-distro-al2023, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '71'
    testgrid-tab-name: ci-kubernetes-kops-al2023-aws-serial-canary

# {"cloud": "aws", "distro": "al2023", "extra_flags": "--set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log --set=spec.kubeAPIServer.runtimeConfig=api/all=true", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "kubenet"}
- name: e2e-ci-kubernetes-kops-al2023-aws-alpha-features
  cron: '16 1-23/4 * * *'
  labels:
    preset-service-account: "true"
    preset-aws-ssh: "true"
    preset-k8s-kops-aws-credential: "true"
  cluster: k8s-infra-kops-prow-build
  decorate: true
  decoration_config:
    timeout: 270m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=aws \
          --create-args="--image='137112412989/al2023-ami-2023.9.20251208.0-kernel-6.12-x86_64' --channel=alpha --networking=kubenet --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log --set=spec.kubeAPIServer.runtimeConfig=api/all=true" \
          --kubernetes-feature-gates=AllAlpha,AllBeta,-EventedPLEG \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=240m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Feature:(AdmissionWebhookMatchConditions|InPlacePodVerticalScaling|StorageVersionAPI|PodPreset|StatefulSetAutoDeletePVC)\]|Networking" \
          --skip-regex="\[Feature:(SCTPConnectivity|Volumes|Networking-Performance)\]|IPv6|csi-hostpath-v0" \
          --parallel=4
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/aws-ssh/aws-ssh-private
      - name: KUBE_SSH_USER
        value: ec2-user
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: aws
    test.kops.k8s.io/distro: al2023
    test.kops.k8s.io/extra_flags: --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log --set=spec.kubeAPIServer.runtimeConfig=api/all=true
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: kubenet
    testgrid-dashboards: amazon-ec2-kops, kops-distro-al2023, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '47'
    testgrid-tab-name: ci-kubernetes-kops-al2023-aws-alpha-features

# {"cloud": "gce", "distro": "cos125", "extra_flags": "--set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log --set=spec.kubeAPIServer.runtimeConfig=api/all=true --gce-service-account=default", "k8s_version": "ci", "kops_channel": "alpha", "kops_version": "latest", "networking": "kindnet"}
- name: e2e-ci-kubernetes-kops-cos-gce-alpha-features
  cron: '21 1-23/4 * * *'
  labels:
    preset-k8s-ssh: "true"
  cluster: k8s-infra-prow-build
  decorate: true
  decoration_config:
    timeout: 270m
  extra_refs:
  - org: kubernetes
    repo: kops
    base_ref: master
    workdir: true
    path_alias: k8s.io/kops
  spec:
    serviceAccountName: k8s-kops-test
    containers:
    - command:
      - runner.sh
      args:
      - bash
      - -c
      - |
        make test-e2e-install
        kubetest2 kops \
          -v 2 \
          --up --down \
          --cloud-provider=gce \
          --admin-access=0.0.0.0/0 \
          --create-args="--image='cos-cloud/cos-125-19216-104-95' --channel=alpha --networking=kindnet --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log --set=spec.kubeAPIServer.runtimeConfig=api/all=true --gce-service-account=default" \
          --kubernetes-feature-gates=AllAlpha,AllBeta,-EventedPLEG \
          --kops-version-marker=https://storage.googleapis.com/k8s-staging-kops/kops/releases/markers/master/latest-ci-updown-green.txt \
          --kubernetes-version=https://dl.k8s.io/ci/latest.txt \
          --test=kops \
          -- \
          --test-args="-test.timeout=240m" \
          --test-package-url=https://dl.k8s.io \
          --test-package-dir=ci \
          --test-package-marker=latest.txt \
          --focus-regex="\[Feature:(AdmissionWebhookMatchConditions|InPlacePodVerticalScaling|StorageVersionAPI|PodPreset|StatefulSetAutoDeletePVC)\]|Networking" \
          --skip-regex="\[Feature:(SCTPConnectivity|Volumes|Networking-Performance)\]|IPv6|csi-hostpath-v0" \
          --parallel=4
      env:
      - name: KUBE_SSH_KEY_PATH
        value: /etc/ssh-key-secret/ssh-private
      - name: KUBE_SSH_USER
        value: prow
      image: gcr.io/k8s-staging-test-infra/kubekins-e2e:v20260108-6ef4f0b08f-master
      imagePullPolicy: Always
      resources:
        limits:
          cpu: "4"
          memory: 6Gi
        requests:
          cpu: "4"
          memory: 6Gi
  annotations:
    test.kops.k8s.io/cloud: gce
    test.kops.k8s.io/distro: cos125
    test.kops.k8s.io/extra_flags: --set=spec.kubeAPIServer.logLevel=4 --set=spec.kubeAPIServer.auditLogMaxSize=2000000000 --set=spec.kubeAPIServer.enableAggregatorRouting=true --set=spec.kubeAPIServer.auditLogPath=/var/log/kube-apiserver-audit.log --set=spec.kubeAPIServer.runtimeConfig=api/all=true --gce-service-account=default
    test.kops.k8s.io/k8s_version: ci
    test.kops.k8s.io/kops_channel: alpha
    test.kops.k8s.io/kops_version: latest
    test.kops.k8s.io/networking: kindnet
    testgrid-dashboards: kops-distro-cos125, kops-gce, kops-k8s-ci, kops-latest, sig-cluster-lifecycle-kops, sig-cluster-lifecycle-kubeup-to-kops
    testgrid-days-of-results: '47'
    testgrid-tab-name: ci-kubernetes-kops-cos-gce-alpha-features
